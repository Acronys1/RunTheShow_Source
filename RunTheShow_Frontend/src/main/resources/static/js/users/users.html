<h1>Les utilisateurs</h1>
<div ng-init="initFirst()">
    <p class="titre"> La liste des utilisateurs</p>

    <table datatable="ng" class="table row-border hover">
        <thead>
            <tr>
                <th>Login</th>
                <th>Enabled</th>
                <th>Rôles</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="user in users">
                <td>                    
                    <div ng-hide="editingUser[user.id]">{{user.login}}</div>
                    <div ng-show="editingUser[user.id]"><input type="text" ng-model="user.login"></div>
                </td>
                <td>                    
                    <div ng-hide="editingUser[user.id]">{{user.enabled}}</div>
                    <div ng-show="editingUser[user.id]"><input type="text" ng-model="user.enabled"></div>
                </td>
                <td>                    
                    <div ng-hide="editingUser[user.id]">{{user.roles.join(', ')}}</div>
                    <!--<div ng-show="editingUser[user.id]"><input type="text" ng-model="user.roles.id"></div>-->
                    <div ng-show="editingUser[user.id]">
                        <select id="role" name="role" class="form-control" ng-model="user.userRole" ng-options="role.name for role in roles" required>
                            <option value="" >-- Select --</option>
                        </select>
                    </div>
                </td>

                <!--  update, delete !-->
                <td>
                    <button ng-hide="editingUser[user.id]" ng-click="modifyUser(user)">Modify</button>
                    <button ng-show="editingUser[user.id]" ng-click="updateUser(user)">Update</button>
                    <button ng-hide="viewField">Add</button>
                    <button ng-hide="viewField" ng-click="deleteUser(user)">Remove</button>
                </td>

            </tr>
        </tbody>
    </table>
</div>

<p class="titre"> Ajout d'un utilisateur </p>
<div class="alert alert-danger" ng-show="errorAjout">
    {{errorMessage}}
</div>
<form role="form" ng-submit="addUser()">
    <div class="form-group">
        <label for="login">Login :</label>
        <input id="login" class="form-control" type="text" ng-model="user.userLogin" name="login" required />
    </div>
    <div class="form-group">
        <label for="login">Password : </label>
        <input id="password" class="form-control" type="password" ng-model="user.userPassword" name="password" required />
    </div>
    <div class="form-group">
        <label for="role">Rôle : </label>
        <select id="role" name="role" class="form-control" ng-model="user.userRole" ng-options="role.name for role in roles" required>
            <option value="" >-- Select --</option>
        </select>
    </div>
    <button type="submit" id="submit" class="btn btn-primary">Créer</button>
</form>
