
<div ng-controller="event" ng-init="initFirst()">
    <!-- Nav tabs -->
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#myEvent">Mes évènements</a></li>
        <li><a data-toggle="tab" href="#addEvent">Ajouter un évènement</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div id="myEvent" class="tab-pane fade in active">
            <!-- <script>

                    $(document).ready(function() {

                            $('#calendar').fullCalendar({
                                    header: {
                                            left: 'prev,next today',
                                            center: 'title',
                                            right: 'month,agendaWeek,agendaDay'
                                    },
                                    defaultDate: '2016-01-12',
                                    editable: false,
                                    eventLimit: true, // allow "more" link when too many events
                                    events: [
                                            {
                                                    title: 'All Day Event',
                                                    start: '2016-01-01',
                                                    id: '20'
                                            },
                                            {
                                                    title: 'Long Event',
                                                    start: '2016-01-07',
                                                    end: '2016-01-10',
                                                    url: 'http://fdietz.github.io/recipes-with-angular-js/common-user-interface-patterns/displaying-a-modal-dialog.html',
                                                    id: '21'
                                            },
                                            {
                                                    id: 999,
                                                    title: 'Repeating Event',
                                                    start: '2016-01-09T16:00:00',
                                            },
                                            {
                                                    id: 999,
                                                    title: 'Repeating Event',
                                                    start: '2016-01-16T16:00:00',
                                            },
                                            {
                                                    title: 'Conference',
                                                    start: '2016-01-11',
                                                    end: '2016-01-13',
                                                    id: '29852'
                                            },
                                            {
                                                    title: 'Meeting',
                                                    start: '2016-01-12T10:30:00',
                                                    end: '2016-01-12T12:30:00',
                                                    id: '5'
                                            },
                                            {
                                                    title: 'Lunch',
                                                    start: '2016-01-12T12:00:00',
                                                    id: '7'
                                            },
                                            {
                                                    title: 'Meeting',
                                                    start: '2016-01-12T14:30:00',
                                                    id: '90'
                                            },
                                            {
                                                    title: 'Happy Hour',
                                                    start: '2016-01-12T17:30:00',
                                                    id: '42'
                                            },
                                            {
                                                    title: 'Dinner',
                                                    start: '2016-01-12T20:00:00',
                                                    id: '123'
                                            },
                                            {
                                                    title: 'Birthday Party',
                                                    start: '2016-01-13T07:00:00',
                                                    id: '879'
                                            },
                                            {
                                                    title: 'Click for Google',
                                                    url: 'http://google.com/',
                                                    start: '2016-01-28',
                                                    id: '1'
                                            }
                                    ],
                                    eventClick: function(calEvent, jsEvent, view) {
                                        // open modal
                                        //alert('id: ' + calEvent.id);
                                        //alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
                                        //alert('View: ' + view.name);
                                        
                                        $('#myModal').modal('toggle');
                                        $('#myModal').modal('show');
                                        
                                        // change the border color just for fun
                                        $(this).css('border-color', 'red');
                                    }
                            });

                    });
            </script> -->
            
            <div ng-controller="calendarCtrl as calDemo"> 
                <div ui-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources"></div>
            </div>
        </div>
        
        <!-- Modal -->
        <div id="text-page" ng-controller="DemoCtrl as ctrl">
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Inviter des artistes</h4>
              </div>
              <div class="modal-body">
                <section>
                    

                        <!-- <p class="lead">A remplacer dans modal invitation multiple. Test binding ctrl : {{ bindCtrl }}</p> -->

<!--                        <h3>Recherche plusieurs artistes +  com perso pour envoyer invit</h1>-->
                        
<!--                        <hr>-->
                        <label>Inviter des artistes</label>
                        <ui-select multiple ng-model="ctrl.multipleDemo.selectedPeople" theme="bootstrap" ng-disabled="ctrl.disabled" sortable="true" close-on-select="false" style="width: '1000px';">
                            <ui-select-match placeholder="Chercher des artistes à inviter">
                                <img style="float:left;border-radius: 25px;" ng-src="{{$item.image}}"  alt="ImageMarchePas" />
                                {{$item.name}}
                            </ui-select-match>
                            <ui-select-choices refresh="refreshArtiste($select.search)" refresh-delay="1000" repeat="person in ctrl.people">
                                <small>
                                  <img style="float:left;border-radius: 25px;" ng-src="{{person.image}}"  alt="ImageMarchePas" />
                                </small>
                              <div style="margin-left: 60px;" ng-bind-html="person.name | highlight: $select.search"></div>
                              <div style="margin-left: 60px;">BLABLABLABLA</div>
                          </ui-select-choices>
                        </ui-select>
                        selection : {{ ctrl.multipleDemo.selectedPeople }}<br>
                    
                        <br><br>
                        <fieldset class="form-group">
                            <label for="msgPerso">Envoyer un message personnel</label>
                            <textarea class="form-control" id="msgPerso" ng-model="msgPerso" name="info" rows="2"></textarea>
                        </fieldset>

<!--                        <div class="row">
                            <div class="col-sm-12 text-center">
                                <button ng-click="sendInvitation()" type="submit" class="btn btn-template-main"><i class="fa fa-paper-plane"></i>Envoyer les invitations</button>
                            </div>
                        </div>-->                    
                </section>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                <button type="button" ng-click="sendInvitation()" class="btn btn-template-main"><i class="fa fa-paper-plane"></i>Envoyer les invitations</button>
              </div>
            </div>
          </div>
        </div>
        </div>
        
        <div id="addEvent" class="tab-pane fade">
            <div class="alert alert-danger" ng-show="errorAjout">
                {{errorMessage}}
            </div>
            <form name="fen" role="form" ng-submit="addEvent()">
                <fieldset class="form-group">
                    <label for="intitule">Intitulé :</label>
                    <input id="intitule" class="form-control" type="text" ng-model="event.intitule" name="intitule" />
                </fieldset>
                
                <fieldset class="form-group">
                   <label for="description">Description</label>
                   <textarea class="form-control" id="description" ng-model="event.description" name="description" rows="3"></textarea>
                </fieldset>
                
                <div class="container">
                    <div class='col-md-5'>
                        <label for="checkin">Date début</label>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker6'>
                                <input type='text' datepicker="" ng-model="event.datetimedebevent" class="form-control" id="checkin" name="checkin" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                            <span class="text-danger"> 
                                {{event.datetimedebevent}}                     
                            </span>
                        </div>
                    </div>
                    
                    <div class='col-md-5'>
                        <label for="checkout">Date fin</label>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker7'>
                                <input type='text' datepicker="" ng-model="event.datetimefinevent" class="form-control" id="checkout" name="checkout" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <span class="text-danger"> 
                                {{event.datetimefinevent}}                     
                        </span>
                    </div>
                </div>
                
                
                <fieldset class="form-group">
                   <label for="description">Informations complémentaires</label>
                   <textarea class="form-control" id="info" ng-model="event.info" name="info" rows="3"></textarea>
                </fieldset>
                
                
                <div ng-app="event">
                    <fieldset style="background: #FCFCFC;padding: 16px;border: 1px solid #D5D5D5;box-shadow: 8px 8px 0px #aaa; " data-ng-repeat="choice in choices">
                        <div class="container" disable-all="lastDateTimePickerSousEvent($index)">
                            <div class="row">
                                <div class='col-md-5'>
                                    <label for="checkin">Date début sous-évènement</label>
                                    <div class="form-group">
                                        <div class='input-group date' id="datetimedeb">
                                            <input type='text' class="form-control" sdatepicker="" ng-model="sousEvent.scheckin[$index]" id="scheckin-{{$index}}"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                        <span class="text-danger"> 
                                            {{sousEvent.scheckin[$index]}}                     
                                        </span>
                                    </div>
                                </div>

                                <div class='col-md-5'>
                                    <label for="checkout">Date fin sous-évènement</label>
                                    <div class="form-group">
                                        <div class='input-group date' id="datetimefin">
                                            <input type='text' class="form-control" sdatepicker="" ng-model="sousEvent.scheckout[$index]" id="scheckout-{{$index}}" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                        <span class="text-danger"> 
                                            {{sousEvent.scheckout[$index]}}                     
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class='col-md-10'>
                                    <div class="form-group">
                                        <label for="sdescription">Description</label>
                                        <textarea class="form-control" sinput="" id="sdescription-{{$index}}"  ng-model="sousEvent.sdescription[$index]" name="sdescription" rows="3"></textarea>
                                    </div>
                                    <span class="text-danger"> 
                                        {{sousEvent.sdescription[$index]}}                     
                                    </span>
                                </div>
                            </div>
                            
                            
                            <div class="row">
                                <div class='col-md-2'>
                                    <div class="form-group">
                                        <label for="setage">Etage</label>
                                        <input type="number" min="0" max ="20" class="form-control" sinput="" id="setage-{{$index}}" ng-model="sousEvent.setage[$index]" name="setage-{{$index}}">
                                    </div>
                                    <div role="alert">
                                        <span class="error" ng-show="sousEvent.setage[$index].$error.required">
                                          Required!</span>
                                        <span class="error" ng-show="sousEvent.setage[$index].$error.number">
                                          Not valid number!</span>
                                    </div>
                                    <span class="text-danger"> 
                                        {{sousEvent.setage[$index]}}                     
                                    </span>
                                </div>
                            </div>
                            
                        </div>  
                        <button class="btn btn-danger" ng-show="$last" ng-click="removeChoice()">Supprimer</button>

                    </fieldset>
                    <br>
                    <br>
                    <button type="button" class="btn btn-primary" ng-click="addNewChoice()" ng-disabled="((!event.datetimedebevent) || (!event.datetimefinevent) || (!event.intitule) || (!event.description))">Ajouter</button>

                    <div id="choicesDisplay">
                       {{ choices }}
                    </div>
                    
                    <div id="scheckinDisplay">
                       {{ sousEvent.scheckin }}
                    </div>
                    
                    <div id="scheckoutDisplay">
                       {{ sousEvent.scheckout }}
                    </div>
                    
                    <div id="sdescriptionDisplay">
                       {{ sousEvent.sdescription }}
                    </div>
                    
                    <div id="setageDisplay">
                       {{ sousEvent.setage }}
                    </div>
                    
                </div>
                
                <button type="submit" class="btn btn-template-main" ng-disabled="((!event.datetimedebevent) || (!event.datetimefinevent) || (!event.intitule) || (!event.description))"><i class="fa fa-save"></i> Sauvegarder les évènements</button>
                
            </form>
        </div>
    </div>
</div>
